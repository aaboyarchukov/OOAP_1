# Рефлексия

Эталонное решение:

```java
abstract class NativeDictionary<T>

  // конструктор
// постусловие: создан пустой ассоциативный массив
  public NativeDictionary<T> NativeDictionary();

  // команды
// постусловие: в массив добавлена новая пара ключ-значение, 
// если данный ключ отсутствовал;
// в противном случае обновлено значение
// для соответствующего ключа
  public void put(string key, T value);

// предусловие: ключ key присутствует в массиве
// постусловие: ключ удаляется вместе со своим значением
  public void remove(string key);

  // запросы
// предусловие: ключ key присутствует в массиве
  public T get(string key);

// данный запрос требуется отдельно, 
// чтобы не использовать вместо него
// второстепенный запрос проверки статуса запроса get
  public bool is_key(string key); // проверка наличия ключа в массиве

  public int size(); // текущий размер массива

  // запросы статусов (возможные значения статусов)
  public int get_put_status();
    // успешно добавлен новый ключ и значение; 
    // успешно обновлено значение существующего ключа

  public int get_remove_status(); // успешно; ключ отсутствует

  public int get_get_status(); // успешно; ключ отсутствует
```

Проанализировав эталонное решение выявил несколько недочетов:
- неверно сделан метод проверки существования ключа, также не учел, что методом is_key можно заменить второстепенный метод по проверки статуса запроса Get
- также неверно определил состояния для метода Put()

Решение после рефлексии:

```go
type NativeDictionary struct {
	// конструктор
	NativeDictionary[T any]() NativeDictionary T
	
	// команды
	
	// предусловие: элемента нет в словаре
	// постусловие: элемент сохранен в словаре по ключу key,
	// либо существующее значение перезаписано 
	// размер таблицы увеличился на 1
	Put(key string, value T)
	
	// предсуловие: словарь не пуст
	// постусловие: элемент удален из словаря, размер таблицы уменьшился на 1
	Delete(value T)
	
	// запросы
	
	// данный запрос также избавляет нас от потребности
	// проверять результат запроса get
	// так как по сути мы проверяем наличие ключа
	// и значит, что проверяем сможем ли мы достать значение
	
	// постусловие: поиск элемента по таблице завершился
	Exist(value T) bool
	
	// предусловие: элемент есть в словаре
	// постусловие: получен элемент из словаря
	Get(key string) T
	
	// предусловие: для элемента есть место в словаре
	// постусловие: найден подходящее место в словаре
	SeekSlot(key string) int
	
	// возвращает индекс для элемента
	// предусловие: таблица не пустая
	// постусловие: вычислен индекс для элемента
	Hash(value T) int
	
	// доп. запросы
	GetPutStatus() Status // успешно; элемент уже был в таблице
	GetDeleteStatus() Status // успешно; таблица пуста
	GetHashStatus() Status // успешно; таблица пуста
	GetSeekSlotStatus() Status // успешно; нет места в словаре
	
	// доп. анонимные запросы
	evacuate() // эвакуирует данные, когда массив переполнился
	needEvacuate() bool // определяет нужна ли эвакуация
	

}
```ы